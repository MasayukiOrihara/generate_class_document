export const TEST_ANALYZE_TEMPLATE = `以下のコードを読み取り、単体テスト仕様書を作成してください。

  # GOLE
  - 対象コードの入出力・副作用・状態遷移・例外を正確に把握し、必要十分なテストケースを洗い出すこと
  - 境界値・条件分岐網羅・異常系を必ず含めること
  - 推測は禁止。不明は「不明」と明示し、追加確認事項にまとめること

  # INPUT
  - ファイル名: {fileName}
  - 対象コード:
  <code>
  {code}
  </code>

  # 事前分析（出力する）
  1. 対象関数/コンポーネントの一覧（シグネチャ、返り値、非同期/同期、外部依存）
  2. 入力パラメータと妥当域（型・null/undefined・配列長・数値範囲・文字列長・Enum値・オプション）
  3. 副作用/依存（I/O、DB/HTTP、ストレージ、コンテキスト、Hooks、タイマー、環境変数）
  4. 条件分岐表（条件A/B/Cの真偽表）
  5. 例外発生条件（throw/return error、ガード節、早期return）
  6. 状態遷移（前提→操作→結果。必要なら簡易シーケンス図もテキストで）
  7. モック方針（外部依存のモック/スタブ/スパイ、タイマーfake、ランダム値固定化

  # TEST POLICY
  1. 境界値(必須)
    - 数値/長さ/件数/日付/インデックス等について
      - 最小値、最大値、最小値-1、最大値+1
      - 空配列・1件・最大件数・最大+1

  2. 条件分岐(必須)
    - 「複数条件網羅」=全ての真偽組み合わせを網羅（A,B → 4通り / A,B,C → 8通り）

  3. 異常系(必須)
    - null/undefined、不正型、空文字/空オブジェクト、タイムアウト、例外スロー、外部依存の失敗
  
  4. 非機能（該当時）
    - パフォーマンス（巨大入力、N+1、無限ループ抑止）
    - 並行/再入可能性、イベント多発、デバウンス/スロットル
    - 国際化（i18n）/フォーマット/ロケール
    - アクセシビリティ（React UIの場合：表示/非表示、ロール、ラベル）
  
  # FORMAT
  【テスト一覧】
  - No.: [大項目番号]-[中項目番号]-[小項目番号]
  - 機能（メソッド・関数）
    - ID: [※推測して記載 例: 3-1-FU-FR002]
    - 名称: [※推測して記載 例: ユーザー画面：ログイン実行機能]
  - 確認内容 
    - 大項目: [確認内容の大項目名を記載 例: アカウントロック条件]
    - 中項目: [確認内容の中項目名を記載 例: ログイン失敗回数が LOGIN_FAIL_COUNT_LIMIT - 1 のときのログイン]
  - テスト手順: npm run testで [ファイル名] のjestを実施 [ファイル名は {fileName} に.spec を付与して記載 例: UserService.spec.ts] 
  - 期待値: [期待値を具体的に記載（箇条書き）]
  - 備考: [前提条件や注意点などがあれば記載]

  ... （以下繰り返し）

  # 追加確認事項（最後に必ず出力）
  - 不明点・曖昧点・外部仕様の依存点を箇条書き

  # 生成 ROLE
  - コードを静的に読んだ事実に基づいて作成
  - 断定禁止の場面では「不明」とし、要確認に送る
  - ReactなどUIの場合はDOMの有無・テキスト・クラス/roleまで明記
  - 非同期はfakeTimersやawait前後で観察点を分ける
  - 外部I/Oはモック前提。呼び出し回数・引数・戻り値検証を含める
  - スナップショットは安定化（不定要素を除去）してから
  - テキスト形式で出力すること
    `;

export const TEST_ANALYZE_OUTPUT_TEMPLATE = `以下のコードを読み取り、単体テスト仕様書を作成してください。

  # GOLE
  - 対象コードの入出力・副作用・状態遷移・例外を正確に把握し、必要十分なテストケースを洗い出すこと
  - 境界値・条件分岐網羅・異常系を必ず含めること
  - 推測は禁止。不明は「不明」と明示し、追加確認事項にまとめること

  # INPUT
  - ファイル名: {fileName}
  - 対象コード:
  <code>
  {code}
  </code>

  # 事前分析
  1. 対象関数/コンポーネントの一覧（シグネチャ、返り値、非同期/同期、外部依存）
  2. 入力パラメータと妥当域（型・null/undefined・配列長・数値範囲・文字列長・Enum値・オプション）
  3. 副作用/依存（I/O、DB/HTTP、ストレージ、コンテキスト、Hooks、タイマー、環境変数）
  4. 条件分岐表（条件A/B/Cの真偽表）
  5. 例外発生条件（throw/return error、ガード節、早期return）
  6. 状態遷移（前提→操作→結果。必要なら簡易シーケンス図もテキストで）
  7. モック方針（外部依存のモック/スタブ/スパイ、タイマーfake、ランダム値固定化

  # TEST POLICY
  1. 境界値(必須)
    - 数値/長さ/件数/日付/インデックス等について
      - 最小値、最大値、最小値-1、最大値+1
      - 空配列・1件・最大件数・最大+1

  2. 条件分岐(必須)
    - 「複数条件網羅」=全ての真偽組み合わせを網羅（A,B → 4通り / A,B,C → 8通り）

  3. 異常系(必須)
    - null/undefined、不正型、空文字/空オブジェクト、タイムアウト、例外スロー、外部依存の失敗
  
  4. 非機能（該当時）
    - パフォーマンス（巨大入力、N+1、無限ループ抑止）
    - 並行/再入可能性、イベント多発、デバウンス/スロットル
    - 国際化（i18n）/フォーマット/ロケール
    - アクセシビリティ（React UIの場合：表示/非表示、ロール、ラベル）

  # 追加確認事項（最後に必ず出力）
  - 不明点・曖昧点・外部仕様の依存点を箇条書き

  # 生成 ROLE
  - コードを静的に読んだ事実に基づいて作成
  - 断定禁止の場面では「不明」とし、要確認に送る
  - ReactなどUIの場合はDOMの有無・テキスト・クラス/roleまで明記
  - 非同期はfakeTimersやawait前後で観察点を分ける
  - 外部I/Oはモック前提。呼び出し回数・引数・戻り値検証を含める
  - スナップショットは安定化（不定要素を除去）してから

  # FORMAT
  - 以下の形式に従って JSON で出力してください：
  {format_instructions}
    - func_id: [※推測して記載 例: 3-1-FU-FR002]
    - func_name: [※推測して記載 例: ユーザー画面：ログイン実行機能]
    - check_major: [確認内容の大項目名を記載 例: アカウントロック条件]
    - check_middle: [確認内容の中項目名を記載 例: ログイン失敗回数が LOGIN_FAIL_COUNT_LIMIT - 1 のときのログイン]
    - steps: npm run testで [ファイル名] のjestを実施 [ファイル名は {fileName} に.spec を付与して記載 例: UserService.spec.ts または具体的な手順を箇条書きで記載]
    - expected: [期待値を具体的に記載（箇条書き）]
    - remarks: [前提条件や注意点などがあれば記載]
    `;

export const TEST_CODE_GENERATE_TEMPLATE = `以下の単体テスト仕様書とコードを読み取り、jectのテストコードを作成してください。

  # GOLE
  - 単体テスト仕様書を正確に反映したjestテストコードを生成すること
  - モック・スタブ・スパイ・fakeTimers等、仕様書に基づき適切に実装すること
  - すべてのテストコードを生成すること。部分的な生成は禁止

  # INPUT
  - ファイル名: {fileName}
  - 対象テスト仕様書とコード:
  <code>
  {code}
  </code>

  # 事前分析
  1. 対象関数/コンポーネントの一覧（シグネチャ、返り値、非同期/同期、外部依存）
  2. 入力パラメータと妥当域（型・null/undefined・配列長・数値範囲・文字列長・Enum値・オプション）
  3. 副作用/依存（I/O、DB/HTTP、ストレージ、コンテキスト、Hooks、タイマー、環境変数）
  4. 条件分岐表（条件A/B/Cの真偽表）
  5. 例外発生条件（throw/return error、ガード節、早期return）
  6. 状態遷移（前提→操作→結果。必要なら簡易シーケンス図もテキストで）
  7. モック方針（外部依存のモック/スタブ/スパイ、タイマーfake、ランダム値固定化

  # 追加確認事項（最後に必ず出力）
  - 不明点・曖昧点・外部仕様の依存点を箇条書き

  # 生成 ROLE
  - コードを静的に読んだ事実に基づいて作成
  - 断定禁止の場面では「不明」とし、要確認に送る
  - ReactなどUIの場合はDOMの有無・テキスト・クラス/roleまで明記
  - 非同期はfakeTimersやawait前後で観察点を分ける
  - 外部I/Oはモック前提。呼び出し回数・引数・戻り値検証を含める
  - スナップショットは安定化（不定要素を除去）してから
  - テストコード生成までを行うこと
    `;

/**
 * 総合テスト出力プロンプト
 */
export const COMPREHENSIVE_TEST_OUTPUT_EMPLATE = `以下の情報を読み取り、総合テストの機能テスト仕様書を作成してください。

  # GOLE
  - 以下の機能一覧表をベースとして、機能て周防を作成すること
  - 推測は禁止。不明は「不明」と明示し、追加確認事項にまとめること

  # INPUT

  ## 機能一覧表
  - ファイル名: {functionFileName}
  - 対象ファイル内容:
  <json>
  {functionJson}
  </json>

  ## 要求仕様書
  - ファイル名: {srsFileName}
  - 対象ファイル内容:
  <text>
  {srs}
  </text>

  ## 画面仕様書
  - ファイル名: {screenFileName}
  - 対象ファイル内容:
  <json>
  {screenJson}
  </json>

  # TEST POLICY
    - 機能一覧に記載されている すべての機能IDごとに必ず1件以上のテストケースを出力すること
    - 正常系と代表的な異常系を含めること
    - 「データ件数0件」のケースを正常系に必ず1件含めること
    - 1機能あたり 5〜10 ケース程度を目安とするが、機能自体を省略してはいけない
    - 観点をまとめる場合も、機能IDは元のものを維持すること
    - 項目ごとのバリデーションは代表1ケースにまとめてよい（全項目分は不要）
    - 異常系はエラーコード別に少なくとも1ケースずつ用意すること（401, 500 など）
    - 実際の画面で操作する前提のテストとし、「画面上の操作手順」を含めること
    - 出力形式は 以下のフォーマットとする

  # FORMAT
  - 以下の形式に従って JSON で出力してください：
  {format_instructions}
    - func_id: [機能ID + ケースID 例: 3-1-FU-FR002-FT001]
    - func_name: [※推測して記載 例: ユーザー画面：ログイン実行機能]
    - check_major: [確認内容の大項目名を記載 例: アカウントロック条件]
    - check_middle: [確認内容の中項目名を記載 例: ログイン失敗回数が LOGIN_FAIL_COUNT_LIMIT - 1 のときのログイン]
    - steps: [テスト手順を記載 例: ① 〇〇を行う ② 〇〇存在することを確認
    - expected: [期待値を具体的に記載（箇条書き）]
    - precondition: [テストを行う前の前提条件や準備事項を記載（箇条書き）]
    - remarks: [その他注意点・不明点などがあれば記載（箇条書き）]
    `;
